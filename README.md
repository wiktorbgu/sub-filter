- [sub-filter](#sub-filter)
  - [ะงัะพ ัะผะตะตั ะฟัะพะณัะฐะผะผะฐ?](#ััะพ-ัะผะตะตั-ะฟัะพะณัะฐะผะผะฐ)
  - [ะะฐะบ ัะพะฑัะฐัั ะฟัะพะณัะฐะผะผั?](#ะบะฐะบ-ัะพะฑัะฐัั-ะฟัะพะณัะฐะผะผั)
  - [ะะฐะบ ะทะฐะฟัััะธัั?](#ะบะฐะบ-ะทะฐะฟัััะธัั)
    - [ะัะธะผะตั ั ะฟะพะปะฝัะผะธ ะฝะฐัััะพะนะบะฐะผะธ](#ะฟัะธะผะตั-ั-ะฟะพะปะฝัะผะธ-ะฝะฐัััะพะนะบะฐะผะธ)
    - [ะัะธะผะตั ั ะผะธะฝะธะผะฐะปัะฝัะผะธ ะฝะฐัััะพะนะบะฐะผะธ](#ะฟัะธะผะตั-ั-ะผะธะฝะธะผะฐะปัะฝัะผะธ-ะฝะฐัััะพะนะบะฐะผะธ)
  - [ะงัะพ ะพะทะฝะฐัะฐัั ะฟะฐัะฐะผะตััั?](#ััะพ-ะพะทะฝะฐัะฐัั-ะฟะฐัะฐะผะตััั)
  - [ะะฐะบ ะฟัะพะฒะตัะธัั, ััะพ ะฒัั ัะฐะฑะพัะฐะตั?](#ะบะฐะบ-ะฟัะพะฒะตัะธัั-ััะพ-ะฒัั-ัะฐะฑะพัะฐะตั)
    - [ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั ะฒ ะบะปะธะตะฝัะต?](#ะบะฐะบ-ะธัะฟะพะปัะทะพะฒะฐัั-ะฒ-ะบะปะธะตะฝัะต)
  - [ะะฐะบ ัะพะฑัะฐัั Docker-ะพะฑัะฐะท?](#ะบะฐะบ-ัะพะฑัะฐัั-docker-ะพะฑัะฐะท)
  - [ะะฐะบ ะทะฐะฟัััะธัั ะฒ Docker?](#ะบะฐะบ-ะทะฐะฟัััะธัั-ะฒ-docker)
    - [ะงะตัะตะท Docker](#ัะตัะตะท-docker)
    - [ะงะตัะตะท Podman (ะฐะปััะตัะฝะฐัะธะฒะฐ Docker)](#ัะตัะตะท-podman-ะฐะปััะตัะฝะฐัะธะฒะฐ-docker)

# sub-filter

ะัะพััะพะน ัะธะปััั ะฟะพะดะฟะธัะพะบ

ะญัะฐ ะฟัะพะณัะฐะผะผะฐ โ ัะผะฝัะน ัะธะปััั ะดะปั ัััะปะพะบ ะฝะฐ ะฟัะพะบัะธ-ัะตัะฒะตัั. ะะฝะฐ ะฑะตััั ะฟะพะดะฟะธัะบะธ, ะฟัะพะฒะตััะตั ัะตัะฒะตัะฐ ะฝะฐ ะฒัะตะดะพะฝะพัะฝัะต ะธะปะธ ะฝะตะฑะตะทะพะฟะฐัะฝัะต ะฝะฐัััะพะนะบะธ (ะฝะฐะฟัะธะผะตั, ะทะฐะฟัะตัะฐะตั ัะปะธัะบะพะผ ะฟัะพัััะต ะฟะฐัะพะปะธ, ะพะฟะฐัะฝัะต ะฟะฐัะฐะผะตััั ะธะปะธ ะฝะฐะทะฒะฐะฝะธั ั ะทะฐะฟัะตััะฝะฝัะผะธ ัะปะพะฒะฐะผะธ), ะพััะตะธะฒะฐะตั ะฒัั ะฟะพะดะพะทัะธัะตะปัะฝะพะต ะธ ะฒัะดะฐัั ัะธัััะน, ะฑะตะทะพะฟะฐัะฝัะน ัะฟะธัะพะบ, ะณะพัะพะฒัะน ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฒ ะฟัะธะปะพะถะตะฝะธัั ะบะพัะพััะต ััะธ ะฟะพะดะฟะธัะบะธ ะธัะฟะพะปัะทััั. 

ะัะปะธ ั ะฒะฐั ะตััั ะฒะพะฟัะพัั ะบ ะฝะฐะทะฝะฐัะตะฝะธั ะฟัะพะณัะฐะผะผั, ะฟัะพัะธัะฐะนัะต [FAQ.](FAQ.md).


---

## ะงัะพ ัะผะตะตั ะฟัะพะณัะฐะผะผะฐ?

โ ะัะพะฒะตััะตั ัััะปะบะธ ะฝะฐ ะบะพััะตะบัะฝัั ะทะฐะฟะธัั ะธ ัะฑะธัะฐะตั ะธะท ะฝะธั ัััะฐะฝะฝัะต ะธะปะธ ะฝะตะฟะพะดะดะตัะถะธะฒะฐะตะผัะต ัะฐััะธ  
โ ะฃะดะฐะปัะตั ัััะพะบะธ, ัะพะดะตัะถะฐัะธะต ะทะฐะฟัะตััะฝะฝัะต ัะปะพะฒะฐ (ัะฟะธัะพะบ ะผะพะถะฝะพ ะทะฐะดะฐัั ัะฐะผะพะผั)  
โ ะััะธัะฐะตั ะฒะพะทะผะพะถะฝัะต ยซะปะพะฒััะบะธยป (ัะฐะฝะธะฟะพัั), ะบะพัะพััะต ะธะฝะพะณะดะฐ ะฟะพะฟะฐะดะฐัััั ะฒ ะฟัะฑะปะธัะฝัั ะฟะพะดะฟะธัะบะฐั  
โ ะะตัะธััะตั ัะตะทัะปััะฐัั ะฝะฐ 30 ะผะธะฝัั (ะธะปะธ ะดััะณะพะต ะฒัะตะผั), ััะพะฑั ะฝะต ะณััะทะธัั ะธะฝัะตัะฝะตั ะบะฐะถะดัะน ัะฐะท  
โ ะะตะปะฐะตั ะพะฟะธัะฐะฝะธะต ะฟะพะดะฟะธัะบะธ ะฟะพะฝััะฝัะผ ะธ ะบัะฐัะธะฒัะผ

---

## ะะฐะบ ัะพะฑัะฐัั ะฟัะพะณัะฐะผะผั?

ะัะปะธ ั ะฒะฐั ัััะฐะฝะพะฒะปะตะฝ Go, ะฟัะพััะพ ะฒัะฟะพะปะฝะธัะต ะฒ ัะตัะผะธะฝะฐะปะต:

 ```
go build -o filter main.go
 ```

ะะพัะปะต ััะพะณะพ ะฟะพัะฒะธััั ัะฐะนะป `filter` โ ััะพ ะธ ะตััั ะฒะฐัะฐ ะฟัะพะณัะฐะผะผะฐ.

---

## ะะฐะบ ะทะฐะฟัััะธัั?

### ะัะธะผะตั ั ะฟะพะปะฝัะผะธ ะฝะฐัััะพะนะบะฐะผะธ

 ```
./filter 8000 1800 ./config/sub.txt ./config/bad.txt ./config/uagent.txt
 ```

### ะัะธะผะตั ั ะผะธะฝะธะผะฐะปัะฝัะผะธ ะฝะฐัััะพะนะบะฐะผะธ

 ```
./filter 8000 1800
 ```

(ะ ััะพะผ ัะปััะฐะต ะฟัะพะณัะฐะผะผะฐ ะฒะพะทัะผัั ัะฐะนะปั ะฟะพ ัะผะพะปัะฐะฝะธั ะธะท ะฟะฐะฟะบะธ `./config/`)

---

## ะงัะพ ะพะทะฝะฐัะฐัั ะฟะฐัะฐะผะตััั?

| ะะฐัะฐะผะตัั     | ะะฟะธัะฐะฝะธะต                                                                               |
| ------------ | -------------------------------------------------------------------------------------- |
| `8000`       | ะะพัั, ะฝะฐ ะบะพัะพัะพะผ ะฑัะดะตั ัะฐะฑะพัะฐัั ัะตัะฒะตั (ะผะพะถะฝะพ ะธะทะผะตะฝะธัั)                                |
| `1800`       | ะกะบะพะปัะบะพ ัะตะบัะฝะด ััะฐะฝะธัั ะบะตั (1800 = 30 ะผะธะฝัั)                                           |
| `sub.txt`    | ะกะฟะธัะพะบ ะฒะฐัะธั ะฟะพะดะฟะธัะพะบ (ะฟะพ ะพะดะฝะพะน ะฝะฐ ัััะพะบั)                                             |
| `bad.txt`    | ะกะปะพะฒะฐ, ะบะพัะพััะต ะฝะตะปัะทั ะฒะบะปััะฐัั ะฒ ะฟะพะดะฟะธัะบั (ะฝะฐะฟัะธะผะตั, ะฟะพะดะพะทัะธัะตะปัะฝัะต ะดะพะผะตะฝั)            |
| `uagent.txt` | ะะฐะบะธะต ะบะปะธะตะฝัั (User-Agent) ะผะพะณัั ะฟะพะปััะฐัั ะฟะพะดะฟะธัะบั (ะฝะฐะฟัะธะผะตั, `Clash`, `Shadowrocket`) |

> ๐ก ะัะปะธ ะฒั ะฝะต ัะบะฐะถะตัะต ะฟััะธ ะบ ัะฐะนะปะฐะผ, ะฟัะพะณัะฐะผะผะฐ ะฑัะดะตั ะธัะบะฐัั ะธั ะฒ ะฟะฐะฟะบะต `./config/`.

---

## ะะฐะบ ะฟัะพะฒะตัะธัั, ััะพ ะฒัั ัะฐะฑะพัะฐะตั?

ะะพะฟัะพะฑัะนัะต ะทะฐะฟัะพัะธัั ะพััะธะปัััะพะฒะฐะฝะฝัั ะฟะพะดะฟะธัะบั ะธะท ะฟะตัะฒะพะน ัััะพะบะธ ัะฐะนะปะฐ `sub.txt`:

 ```
curl -H "User-Agent: Clash" "http://localhost:8000/filter?id=1"
 ```

ะัะปะธ ะฒัั ะฝะฐัััะพะตะฝะพ ะฟัะฐะฒะธะปัะฝะพ โ ะฒั ัะฒะธะดะธัะต ยซัะธััััยป ะฟะพะดะฟะธัะบั.

> โ๏ธ ะฃะฑะตะดะธัะตัั, ััะพ ะฝะฐะทะฒะฐะฝะธะต ะฒะฐัะตะณะพ ะบะปะธะตะฝัะฐ (ะฝะฐะฟัะธะผะตั, `Clash`) ะตััั ะฒ ัะฐะนะปะต `uagent.txt`, ะธะฝะฐัะต ัะตัะฒะตั ะพัะบะฐะถะตััั ะพัะดะฐะฒะฐัั ะดะฐะฝะฝัะต.

### ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั ะฒ ะบะปะธะตะฝัะต?

ะะพะฑะฐะฒััะต ะฒ ะฝะฐัััะพะนะบะธ ะบะปะธะตะฝัะฐ ะฟะพะดะฟะธัะบั ะฒะธะดะฐ:

http://ัะตัะฒะตั:ะฟะพัั/filter?id=ะฝะพะผะตั

ะะฐะผะตะฝะธัะต:
- `ัะตัะฒะตั` โ IP-ะฐะดัะตั ะฒะฐัะตะณะพ ะพะฑะพััะดะพะฒะฐะฝะธั ะธะปะธ ัะตัะฒะตัะฐ, ะณะดะต ะทะฐะฟััะตะฝะพ ะฟัะธะปะพะถะตะฝะธะต  
- `ะฟะพัั` โ ะฟะพัั ะฟัะธะปะพะถะตะฝะธั, ะบะพัะพััะน ะฒั ัะบะฐะทะฐะปะธ ะฟัะธ ะทะฐะฟััะบะต  
- `ะฝะพะผะตั` โ ะฝะพะผะตั ัััะพะบะธ ะธะท ัะฐะนะปะฐ ะฟะพะดะฟะธัะพะบ `sub.txt` ั ะฝัะถะฝะพะน  

---

## ะะฐะบ ัะพะฑัะฐัั Docker-ะพะฑัะฐะท?

ะัะปะธ ะฒั ะธัะฟะพะปัะทัะตัะต Docker:
 ```
docker build -t sub-filter .
 ```

---

## ะะฐะบ ะทะฐะฟัััะธัั ะฒ Docker?

### ะงะตัะตะท Docker

 ```
docker run -d \
  --name sub-filter \
  -p 8000:8000 \
  -v $(pwd)/config:/config:ro \
  -v $(pwd)/cache:/cache:rw \
  sub-filter \
  8000 1800
 ```

### ะงะตัะตะท Podman (ะฐะปััะตัะฝะฐัะธะฒะฐ Docker)

 ```
podman run -d --replace \
  --name sub-filter \
  -p 8000:8000 \
  -v $(pwd)/config:/config:ro,z \
  -v $(pwd)/cache:/cache:rw,z \
  sub-filter \
  8000 1800
 ```

> ๐ ะฃะฑะตะดะธัะตัั, ััะพ ะฟะฐะฟะบะธ `./config` ะธ `./cache` ัััะตััะฒััั ะฟะตัะตะด ะทะฐะฟััะบะพะผ!

